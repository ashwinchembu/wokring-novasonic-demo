<!DOCTYPE html>
<html>
<head>
    <title>Test Call History Save</title>
</head>
<body>
    <h1>Test Call History Save</h1>
    <button id="testSave">Test Save</button>
    <button id="checkHistory">Check History</button>
    <div id="output"></div>

    <script>
        document.getElementById('testSave').addEventListener('click', () => {
            const testCall = {
                hcp_name: 'Dr. Test',
                exported_at: new Date().toISOString(),
                test: true
            };
            
            let callHistory = [];
            const saved = localStorage.getItem('callHistory');
            if (saved) {
                callHistory = JSON.parse(saved);
            }
            
            callHistory.push(testCall);
            localStorage.setItem('callHistory', JSON.stringify(callHistory));
            
            document.getElementById('output').innerHTML = `Saved! Total calls: ${callHistory.length}`;
        });
        
        document.getElementById('checkHistory').addEventListener('click', () => {
            const saved = localStorage.getItem('callHistory');
            if (saved) {
                const history = JSON.parse(saved);
                document.getElementById('output').innerHTML = `<pre>${JSON.stringify(history, null, 2)}</pre>`;
            } else {
                document.getElementById('output').innerHTML = 'No history found';
            }
        });
    </script>
</body>
</html>

